# pkg/servicemanager/services.yaml
name: "minimal-deployment-test"
description: "A minimal services definition for orchestrator testing."
default_project_id: your-gcp-project-id # IMPORTANT: Replace with your actual GCP Project ID
default_location: us-central1 # Default location for regional resources (e.g., BigQuery, GCS)
default_region: us-central1 # Default region for regional resources (e.g., Pub/Sub, Cloud Run)

#leave service_account empty and the service will automatically create appropriate ones
services:
  - name: "ingestion"
    #service_account: "ingestion-sa@your-gcp-project.iam.gserviceaccount.com"
  - name: "servicedirector"
    #service_account: "analysis-sa@your-gcp-project.iam.gserviceaccount.com"

dataflows:
  - name: "ingestion-dataflow"
    description: "Handles data ingestion from various sources."
    service_names: # Services participating in this dataflow
      - svc-ingestor
    lifecycle:
      strategy: ephemeral # Resources for this dataflow will be torn down
    resources:
      pubsub_topics:
        - name: "input-topic" # A Pub/Sub topic for incoming data
          iam_access_policy:
            iam_access: # IAM policies for this resource
              - name: svc-ingestor-sa # Refers to the service account defined in deployment.yaml
                role: roles/pubsub.viewer # Ingestor needs to read from this topic
        - name: "output-topic" # A Pub/Sub topic for outgoing data
          iam_access_policy:
            iam_access:
              - name: svc-ingestor-sa
                role: roles/pubsub.publisher # Ingestor needs to publish to this topic
